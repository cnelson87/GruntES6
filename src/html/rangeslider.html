{{#extend "default"}}

	{{#replace "title"}}{{rangeslider.title}} - {{title}}{{/replace}}
	{{#replace "description"}}{{rangeslider.description}}{{/replace}}
	{{#replace "keywords"}}{{keywords}}, {{rangeslider.keywords}}{{/replace}}

	{{#replace "head"}}
	<style>
		.output {color:#81b949;}
		.pad-box {
			border: 1px solid #000;
			padding: 1em;
		}
		.pad-box + .pad-box {
			margin-top: 1em;
		}
		.noUi-slider {
			padding: 0 16px;
		}
	</style>
	<script>
		var dateFormat = 'ddd MMM Do YYYY, h:mm:ss a';
		// function timestamp(date) {
		// 	return date.getTime();
		// }
		function formateDate(date) {
			return moment(date).format(dateFormat);
		}
		$(function() {

			// ELEMENTS -- jQuery-UI
			var $sliderRange = $('#slider-range');
			var $amountOutput = $('#amount-output');

			// ELEMENTS -- noUiSlider
			var $dateSliderWidget = $('#date-slider-widget');
			var $timeSliderWidget = $('#time-slider-widget');
			var $dateSlider = $dateSliderWidget.find('.date-slider');
			var $timeSlider = $timeSliderWidget.find('.time-slider');
			var $dateOutputs = $dateSliderWidget.find('.date-slider-output'); //must be 2 (start/end)
			var $dateFields = $dateSliderWidget.find('.date-slider-field'); //must be 2 (start/end)
			var $timeOutputs = $timeSliderWidget.find('.time-slider-output'); //must be 2 (start/end)
			var $timeFields = $timeSliderWidget.find('.time-slider-field'); //must be 2 (start/end)
			var dateSlider = $dateSlider[0]; //get native element
			var timeSlider = $timeSlider[0]; //get native element

			// DATA -- noUiSlider
			var startDate = new Date($dateSlider.data('start'));
			var endDate = new Date($dateSlider.data('end'));
			var timestampStartDate = startDate.getTime();
			var timestampEndDate = endDate.getTime();
			var startTime = new Date($timeSlider.data('start'));
			var endTime = new Date($timeSlider.data('end'));
			var timestampStartTime = startTime.getTime();
			var timestampEndTime = endTime.getTime();
			var dateStep = 60 * 60 * 1000; // 1 hr
			var timeStep = 15 * 60 * 1000; // 15 min

			// jQuery-UI
			$sliderRange.slider({
				range: true,
				min: 0,
				max: 500,
				values: [ 75, 300 ],
				slide: function(event, ui) {
					$amountOutput.val( '$' + ui.values[ 0 ] + ' - $' + ui.values[ 1 ] );
				}
			});
			$amountOutput.val( '$' + $sliderRange.slider('values', 0) + ' - $' + $sliderRange.slider('values', 1) );

			// noUiSlider - date slider
			noUiSlider.create(dateSlider, {
				range: {
						min: timestampStartDate,
						max: timestampEndDate
				},
				step: dateStep,
				start: [timestampStartDate, timestampEndDate]
			});
			dateSlider.noUiSlider.on('update', function(values, index) {
				$dateOutputs.eq(index).html(formateDate(new Date(+values[index])));
			});
			dateSlider.noUiSlider.on('change', function(values, index) {
				$dateFields.eq(index).val(new Date(+values[index])).change();
			});
			$dateFields.eq(0).val(startDate);
			$dateFields.eq(1).val(endDate);
			$dateFields.on('change', function(event){
				console.log('date change:', $(event.currentTarget).val());
			});

			// noUiSlider - time slider
			noUiSlider.create(timeSlider, {
				range: {
						min: timestampStartTime,
						max: timestampEndTime
				},
				step: timeStep,
				start: [timestampStartTime, timestampEndTime]
			});
			timeSlider.noUiSlider.on('update', function(values, index) {
				$timeOutputs.eq(index).html(formateDate(new Date(+values[index])));
			});
			timeSlider.noUiSlider.on('change', function(values, index) {
				$timeFields.eq(index).val(new Date(+values[index])).change();
			});
			$timeFields.eq(0).val(startTime);
			$timeFields.eq(1).val(endTime);
			$timeFields.on('change', function(event){
				console.log('time change:', $(event.currentTarget).val());
			});

		});
	</script>
	{{/replace}}

	{{#replace "body-id"}}rangesliderpage{{/replace}}

	{{#replace "content"}}

		<section class="content">
			<div class="content-container">

				<h1>{{rangeslider.h1}}</h1>

				<div class="intro">
					<p>{{rangeslider.intro}}</p>
				</div>

			</div>
		</section>

		<section class="content">
			<div class="content-container">

				<h2>jQuery-UI slider</h2>

				<div class="pad-box">
					<p>
						Price Range: <output id="amount-output" class="output"></output>
					</p>
					<div id="slider-range"></div>
				</div>

				<br /><br />

				<h2>noUiSlider</h2>

				<div class="pad-box" id="date-slider-widget">
					<h3>Start/End Date <span class="small">(in 1hr increments)</span></h3>
					<p>
						Start Date (on 'update' event): <span class="output date-slider-output"></span>
						<br />
						End Date (on 'update' event): <span class="output date-slider-output"></span>
						<br />
						Start Date (on 'change' event): <input type="text" readonly class="input-xlong date-slider-field" />
						<br />
						End Date (on 'change' event): <input type="text" readonly class="input-xlong date-slider-field" />
					</p>
					<div class="noUi-slider date-slider" data-start="Sep 20 2017 22:00:00" data-end="Sep 27 2017 6:00:00"></div>
				</div>

				<div class="pad-box" id="time-slider-widget">
					<h3>Start/End Time <span class="small">(in 15min increments)</span></h3>
					<p>
						Start Time (on 'update' event): <span class="output time-slider-output"></span>
						<br />
						End Time (on 'update' event): <span class="output time-slider-output"></span>
						<br />
						Start Time (on 'change' event): <input type="text" readonly class="input-xlong time-slider-field" />
						<br />
						End Time (on 'change' event): <input type="text" readonly class="input-xlong time-slider-field" />
					</p>
					<div class="noUi-slider time-slider" data-start="Sep 27 2017 6:00:00" data-end="Sep 27 2017 22:00:00"></div>
				</div>

			</div>
		</section>

	{{/replace}}

{{/extend}}
